import _defineProperty from "@babel/runtime/helpers/esm/defineProperty";
import _extends from "@babel/runtime/helpers/esm/extends";
import _objectWithoutProperties from "@babel/runtime/helpers/esm/objectWithoutProperties";
var _excluded = ["appearance", "children", "className", "color", "disabled", "iconAfter", "iconBefore", "intent", "is", "isActive", "isLoading"],
    _excluded2 = ["className"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

import React, { memo, forwardRef } from 'react';
import cx from 'classnames';
import PropTypes from 'prop-types';
import Box, { spacing, dimensions, position, layout } from 'ui-box';
import { useStyleConfig } from '../../hooks';
import { IconWrapper } from '../../icons/src/IconWrapper';
import { getTextPropsForControlHeight } from '../../lib/deprecated-theme-helpers';
import { Spinner } from '../../spinner';
/* eslint-disable react/prop-types */

var ButtonIcon = /*#__PURE__*/memo(function ButtonIcon(_ref) {
  var edge = _ref.edge,
      icon = _ref.icon,
      size = _ref.size,
      spacing = _ref.spacing;
  if (!icon) return null;
  var relativeSpace = typeof spacing === 'number' ? spacing : size;
  var edgeMargin = -Math.round(relativeSpace * 0.25);
  var innerMargin = Math.round(size * 0.7);
  var marginLeft = edge === 'start' ? edgeMargin : innerMargin;
  var marginRight = edge === 'end' ? edgeMargin : innerMargin;
  return /*#__PURE__*/React.createElement(IconWrapper, {
    icon: icon,
    size: size,
    marginLeft: marginLeft,
    marginRight: marginRight
  });
});
/* eslint-enable react/prop-types */

export var internalStyles = {
  position: 'relative',
  fontWeight: 500,
  display: 'inline-flex',
  alignItems: 'center',
  flexWrap: 'nowrap',
  justifyContent: 'center',
  textDecoration: 'none',
  verticalAlign: 'middle',
  border: 'none',
  outline: 'none',
  userSelect: 'none',
  cursor: 'pointer',
  whiteSpace: 'nowrap',
  WebkitFontSmoothing: 'antialiased',
  WebkitAppearance: 'none',
  MozAppearance: 'none',
  '&::-moz-focus-inner ': {
    border: 0
  }
};
export var pseudoSelectors = {
  _active: '&:not([disabled]):active, &:not([disabled])[aria-expanded="true"], &:not([disabled])[data-active]',
  _disabled: '&[disabled]',
  _focus: '&:not([disabled]):focus',
  _focusAndActive: '&:not([disabled]):focus:active, &:not([disabled])[aria-expanded="true"]:focus, &:not([disabled])[data-active]:focus',
  _hover: '&:not([disabled]):hover'
};
export var getIconSizeForButton = function getIconSizeForButton(height) {
  if (height <= 28) return 12;
  if (height <= 32) return 14;
  if (height <= 40) return 16;
  if (height <= 48) return 18;
  return 20;
};
var Button = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(function Button(props, ref) {
  var _props$appearance = props.appearance,
      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,
      children = props.children,
      className = props.className,
      color = props.color,
      disabled = props.disabled,
      iconAfter = props.iconAfter,
      iconBefore = props.iconBefore,
      _props$intent = props.intent,
      intent = _props$intent === void 0 ? 'none' : _props$intent,
      _props$is = props.is,
      is = _props$is === void 0 ? 'button' : _props$is,
      _props$isActive = props.isActive,
      isActive = _props$isActive === void 0 ? false : _props$isActive,
      isLoading = props.isLoading,
      restProps = _objectWithoutProperties(props, _excluded);

  var _useStyleConfig = useStyleConfig('Button', {
    appearance: appearance,
    color: color,
    intent: intent,
    size: restProps.size || 'medium'
  }, pseudoSelectors, internalStyles),
      themedClassName = _useStyleConfig.className,
      boxProps = _objectWithoutProperties(_useStyleConfig, _excluded2);

  var height = restProps.height || boxProps.height; // Keep backwards compat font sizing if an explicit height was passed in.

  var textProps = !restProps.size && restProps.height ? getTextPropsForControlHeight(restProps.height) : {};
  var iconSize = getIconSizeForButton(height);
  return /*#__PURE__*/React.createElement(Box, _extends({
    is: is,
    ref: ref,
    className: cx(themedClassName, className),
    "data-active": isActive || undefined
  }, boxProps, restProps, textProps, {
    disabled: disabled || isLoading
  }), isLoading && /*#__PURE__*/React.createElement(Spinner, {
    marginLeft: -Math.round(height / 8),
    marginRight: Math.round(height / 4),
    size: Math.round(height / 2)
  }), /*#__PURE__*/React.createElement(ButtonIcon, {
    icon: iconBefore,
    size: iconSize,
    spacing: restProps.paddingLeft,
    edge: "start"
  }), children, /*#__PURE__*/React.createElement(ButtonIcon, {
    icon: iconAfter,
    size: iconSize,
    spacing: restProps.paddingRight,
    edge: "end"
  }));
}));
Button.propTypes = _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, dimensions.propTypes), spacing.propTypes), position.propTypes), layout.propTypes), {}, {
  /**
   * The intent of the button.
   */
  intent: PropTypes.string,

  /**
   * The appearance of the button.
   */
  appearance: PropTypes.string,

  /**
   * The size of the button
   */
  size: PropTypes.oneOf(['small', 'medium', 'large']),

  /**
   * When true, show a loading spinner before the children.
   * This also disables the button.
   */
  isLoading: PropTypes.bool,

  /**
   * Forcefully set the active state of a button.
   * Useful in conjunction with a Popover.
   */
  isActive: PropTypes.bool,

  /**
   * Sets an icon before the text. Can be any icon from Evergreen or a custom element.
   */
  iconBefore: PropTypes.oneOfType([PropTypes.elementType, PropTypes.element]),

  /**
   * Sets an icon after the text. Can be any icon from Evergreen or a custom element.
   */
  iconAfter: PropTypes.oneOfType([PropTypes.elementType, PropTypes.element]),

  /**
   * When true, the button is disabled.
   * isLoading also sets the button to disabled.
   */
  disabled: PropTypes.bool,

  /**
   * Class name passed to the button.
   * Only use if you know what you are doing.
   */
  className: PropTypes.string
});
export default Button;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9idXR0b25zL3NyYy9CdXR0b24uanMiXSwibmFtZXMiOlsiUmVhY3QiLCJtZW1vIiwiZm9yd2FyZFJlZiIsImN4IiwiUHJvcFR5cGVzIiwiQm94Iiwic3BhY2luZyIsImRpbWVuc2lvbnMiLCJwb3NpdGlvbiIsImxheW91dCIsInVzZVN0eWxlQ29uZmlnIiwiSWNvbldyYXBwZXIiLCJnZXRUZXh0UHJvcHNGb3JDb250cm9sSGVpZ2h0IiwiU3Bpbm5lciIsIkJ1dHRvbkljb24iLCJlZGdlIiwiaWNvbiIsInNpemUiLCJyZWxhdGl2ZVNwYWNlIiwiZWRnZU1hcmdpbiIsIk1hdGgiLCJyb3VuZCIsImlubmVyTWFyZ2luIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwiaW50ZXJuYWxTdHlsZXMiLCJmb250V2VpZ2h0IiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJmbGV4V3JhcCIsImp1c3RpZnlDb250ZW50IiwidGV4dERlY29yYXRpb24iLCJ2ZXJ0aWNhbEFsaWduIiwiYm9yZGVyIiwib3V0bGluZSIsInVzZXJTZWxlY3QiLCJjdXJzb3IiLCJ3aGl0ZVNwYWNlIiwiV2Via2l0Rm9udFNtb290aGluZyIsIldlYmtpdEFwcGVhcmFuY2UiLCJNb3pBcHBlYXJhbmNlIiwicHNldWRvU2VsZWN0b3JzIiwiX2FjdGl2ZSIsIl9kaXNhYmxlZCIsIl9mb2N1cyIsIl9mb2N1c0FuZEFjdGl2ZSIsIl9ob3ZlciIsImdldEljb25TaXplRm9yQnV0dG9uIiwiaGVpZ2h0IiwiQnV0dG9uIiwicHJvcHMiLCJyZWYiLCJhcHBlYXJhbmNlIiwiY2hpbGRyZW4iLCJjbGFzc05hbWUiLCJjb2xvciIsImRpc2FibGVkIiwiaWNvbkFmdGVyIiwiaWNvbkJlZm9yZSIsImludGVudCIsImlzIiwiaXNBY3RpdmUiLCJpc0xvYWRpbmciLCJyZXN0UHJvcHMiLCJ0aGVtZWRDbGFzc05hbWUiLCJib3hQcm9wcyIsInRleHRQcm9wcyIsImljb25TaXplIiwidW5kZWZpbmVkIiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJwcm9wVHlwZXMiLCJzdHJpbmciLCJvbmVPZiIsImJvb2wiLCJvbmVPZlR5cGUiLCJlbGVtZW50VHlwZSIsImVsZW1lbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxPQUFPQSxLQUFQLElBQWdCQyxJQUFoQixFQUFzQkMsVUFBdEIsUUFBd0MsT0FBeEM7QUFDQSxPQUFPQyxFQUFQLE1BQWUsWUFBZjtBQUNBLE9BQU9DLFNBQVAsTUFBc0IsWUFBdEI7QUFDQSxPQUFPQyxHQUFQLElBQWNDLE9BQWQsRUFBdUJDLFVBQXZCLEVBQW1DQyxRQUFuQyxFQUE2Q0MsTUFBN0MsUUFBMkQsUUFBM0Q7QUFDQSxTQUFTQyxjQUFULFFBQStCLGFBQS9CO0FBQ0EsU0FBU0MsV0FBVCxRQUE0Qiw2QkFBNUI7QUFDQSxTQUFTQyw0QkFBVCxRQUE2QyxvQ0FBN0M7QUFDQSxTQUFTQyxPQUFULFFBQXdCLGVBQXhCO0FBRUE7O0FBQ0EsSUFBTUMsVUFBVSxnQkFBR2IsSUFBSSxDQUFDLFNBQVNhLFVBQVQsT0FBbUQ7QUFBQSxNQUE3QkMsSUFBNkIsUUFBN0JBLElBQTZCO0FBQUEsTUFBdkJDLElBQXVCLFFBQXZCQSxJQUF1QjtBQUFBLE1BQWpCQyxJQUFpQixRQUFqQkEsSUFBaUI7QUFBQSxNQUFYWCxPQUFXLFFBQVhBLE9BQVc7QUFDekUsTUFBSSxDQUFDVSxJQUFMLEVBQVcsT0FBTyxJQUFQO0FBRVgsTUFBTUUsYUFBYSxHQUFHLE9BQU9aLE9BQVAsS0FBbUIsUUFBbkIsR0FBOEJBLE9BQTlCLEdBQXdDVyxJQUE5RDtBQUNBLE1BQU1FLFVBQVUsR0FBRyxDQUFDQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0gsYUFBYSxHQUFHLElBQTNCLENBQXBCO0FBQ0EsTUFBTUksV0FBVyxHQUFHRixJQUFJLENBQUNDLEtBQUwsQ0FBV0osSUFBSSxHQUFHLEdBQWxCLENBQXBCO0FBQ0EsTUFBTU0sVUFBVSxHQUFHUixJQUFJLEtBQUssT0FBVCxHQUFtQkksVUFBbkIs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QVEsRUFBRXpELFNBQVMsQ0FBQ3NFLElBOUN0Qjs7QUFnREU7QUFDRjtBQUNBO0FBQ0VoQixFQUFBQSxVQUFVLEVBQUV0RCxTQUFTLENBQUN1RSxTQUFWLENBQW9CLENBQUN2RSxTQUFTLENBQUN3RSxXQUFYLEVBQXdCeEUsU0FBUyxDQUFDeUUsT0FBbEMsQ0FBcEIsQ0FuRGQ7O0FBcURFO0FBQ0Y7QUFDQTtBQUNFcEIsRUFBQUEsU0FBUyxFQUFFckQsU0FBUyxDQUFDdUUsU0FBVixDQUFvQixDQUFDdkUsU0FBUyxDQUFDd0UsV0FBWCxFQUF3QnhFLFNBQVMsQ0FBQ3lFLE9BQWxDLENBQXBCLENBeERiOztBQTBERTtBQUNGO0FBQ0E7QUFDQTtBQUNFckIsRUFBQUEsUUFBUSxFQUFFcEQsU0FBUyxDQUFDc0UsSUE5RHRCOztBQWdFRTtBQUNGO0FBQ0E7QUFDQTtBQUNFcEIsRUFBQUEsU0FBUyxFQUFFbEQsU0FBUyxDQUFDb0U7QUFwRXZCO0FBdUVBLGVBQWV2QixNQUFmIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IG1lbW8sIGZvcndhcmRSZWYgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJ1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xuaW1wb3J0IEJveCwgeyBzcGFjaW5nLCBkaW1lbnNpb25zLCBwb3NpdGlvbiwgbGF5b3V0IH0gZnJvbSAndWktYm94J1xuaW1wb3J0IHsgdXNlU3R5bGVDb25maWcgfSBmcm9tICcuLi8uLi9ob29rcydcbmltcG9ydCB7IEljb25XcmFwcGVyIH0gZnJvbSAnLi4vLi4vaWNvbnMvc3JjL0ljb25XcmFwcGVyJ1xuaW1wb3J0IHsgZ2V0VGV4dFByb3BzRm9yQ29udHJvbEhlaWdodCB9IGZyb20gJy4uLy4uL2xpYi9kZXByZWNhdGVkLXRoZW1lLWhlbHBlcnMnXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vLi4vc3Bpbm5lcidcblxuLyogZXNsaW50LWRpc2FibGUgcmVhY3QvcHJvcC10eXBlcyAqL1xuY29uc3QgQnV0dG9uSWNvbiA9IG1lbW8oZnVuY3Rpb24gQnV0dG9uSWNvbih7IGVkZ2UsIGljb24sIHNpemUsIHNwYWNpbmcgfSkge1xuICBpZiAoIWljb24pIHJldHVybiBudWxsXG5cbiAgY29uc3QgcmVsYXRpdmVTcGFjZSA9IHR5cGVvZiBzcGFjaW5nID09PSAnbnVtYmVyJyA/IHNwYWNpbmcgOiBzaXplXG4gIGNvbnN0IGVkZ2VNYXJnaW4gPSAtTWF0aC5yb3VuZChyZWxhdGl2ZVNwYWNlICogMC4yNSlcbiAgY29uc3QgaW5uZXJNYXJnaW4gPSBNYXRoLnJvdW5kKHNpemUgKiAwLjcpXG4gIGNvbnN0IG1hcmdpbkxlZnQgPSBlZGdlID09PSAnc3RhcnQnID8gZWRnZU1hcmdpbiA6IGlubmVyTWFyZ2luXG4gIGNvbnN0IG1hcmdpblJpZ2h0ID0gZWRnZSA9PT0gJ2VuZCcgPyBlZGdlTWFyZ2luIDogaW5uZXJNYXJnaW5cblxuICByZXR1cm4gPEljb25XcmFwcGVyIGljb249e2ljb259IHNpemU9e3NpemV9IG1hcmdpbkxlZnQ9e21hcmdpbkxlZnR9IG1hcmdpblJpZ2h0PXttYXJnaW5SaWdodH0gLz5cbn0pXG4vKiBlc2xpbnQtZW5hYmxlIHJlYWN0L3Byb3AtdHlwZXMgKi9cblxuZXhwb3J0IGNvbnN0IGludGVybmFsU3R5bGVzID0ge1xuICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgZm9udFdlaWdodDogNTAwLFxuICBkaXNwbGF5OiAnaW5saW5lLWZsZXgnLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgZmxleFdyYXA6ICdub3dyYXAnLFxuICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIHRleHREZWNvcmF0aW9uOiAnbm9uZScsXG4gIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnLFxuICBib3JkZXI6ICdub25lJyxcbiAgb3V0bGluZTogJ25vbmUnLFxuICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gIGN1cnNvcjogJ3BvaW50ZXInLFxuICB3aGl0ZVNwYWNlOiAnbm93cmFwJyxcbiAgV2Via2l0Rm9udFNtb290aGluZzogJ2FudGlhbGlhc2VkJyxcbiAgV2Via2l0QXBwZWFyYW5jZTogJ25vbmUnLFxuICBNb3pBcHBlYXJhbmNlOiAnbm9uZScsXG4gICcmOjotbW96LWZvY3VzLWlubmVyICc6IHtcbiAgICBib3JkZXI6IDBcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcHNldWRvU2VsZWN0b3JzID0ge1xuICBfYWN0aXZlOiAnJjpub3QoW2Rpc2FibGVkXSk6YWN0aXZlLCAmOm5vdChbZGlzYWJsZWRdKVthcmlhLWV4cGFuZGVkPVwidHJ1ZVwiXSwgJjpub3QoW2Rpc2FibGVkXSlbZGF0YS1hY3RpdmVdJyxcbiAgX2Rpc2FibGVkOiAnJltkaXNhYmxlZF0nLFxuICBfZm9jdXM6ICcmOm5vdChbZGlzYWJsZWRdKTpmb2N1cycsXG4gIF9mb2N1c0FuZEFjdGl2ZTpcbiAgICAnJjpub3QoW2Rpc2FibGVkXSk6Zm9jdXM6YWN0aXZlLCAmOm5vdChbZGlzYWJsZWRdKVthcmlhLWV4cGFuZGVkPVwidHJ1ZVwiXTpmb2N1cywgJjpub3QoW2Rpc2FibGVkXSlbZGF0YS1hY3RpdmVdOmZvY3VzJyxcbiAgX2hvdmVyOiAnJjpub3QoW2Rpc2FibGVkXSk6aG92ZXInXG59XG5cbmV4cG9ydCBjb25zdCBnZXRJY29uU2l6ZUZvckJ1dHRvbiA9IGhlaWdodCA9PiB7XG4gIGlmIChoZWlnaHQgPD0gMjgpIHJldHVybiAxMlxuICBpZiAoaGVpZ2h0IDw9IDMyKSByZXR1cm4gMTRcbiAgaWYgKGhlaWdodCA8PSA0MCkgcmV0dXJuIDE2XG4gIGlmIChoZWlnaHQgPD0gNDgpIHJldHVybiAxOFxuICByZXR1cm4gMjBcbn1cblxuY29uc3QgQnV0dG9uID0gbWVtbyhcbiAgZm9yd2FyZFJlZihmdW5jdGlvbiBCdXR0b24ocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHtcbiAgICAgIGFwcGVhcmFuY2UgPSAnZGVmYXVsdCcsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGNvbG9yLFxuICAgICAgZGlzYWJsZWQsXG4gICAgICBpY29uQWZ0ZXIsXG4gICAgICBpY29uQmVmb3JlLFxuICAgICAgaW50ZW50ID0gJ25vbmUnLFxuICAgICAgaXMgPSAnYnV0dG9uJyxcbiAgICAgIGlzQWN0aXZlID0gZmFsc2UsXG4gICAgICBpc0xvYWRpbmcsXG4gICAgICAuLi5yZXN0UHJvcHNcbiAgICB9ID0gcHJvcHNcblxuICAgIGNvbnN0IHsgY2xhc3NOYW1lOiB0aGVtZWRDbGFzc05hbWUsIC4uLmJveFByb3BzIH0gPSB1c2VTdHlsZUNvbmZpZyhcbiAgICAgICdCdXR0b24nLFxuICAgICAgeyBhcHBlYXJhbmNlLCBjb2xvciwgaW50ZW50LCBzaXplOiByZXN0UHJvcHMuc2l6ZSB8fCAnbWVkaXVtJyB9LFxuICAgICAgcHNldWRvU2VsZWN0b3JzLFxuICAgICAgaW50ZXJuYWxTdHlsZXNcbiAgICApXG5cbiAgICBjb25zdCBoZWlnaHQgPSByZXN0UHJvcHMuaGVpZ2h0IHx8IGJveFByb3BzLmhlaWdodFxuICAgIC8vIEtlZXAgYmFja3dhcmRzIGNvbXBhdCBmb250IHNpemluZyBpZiBhbiBleHBsaWNpdCBoZWlnaHQgd2FzIHBhc3NlZCBpbi5cbiAgICBjb25zdCB0ZXh0UHJvcHMgPSAhcmVzdFByb3BzLnNpemUgJiYgcmVzdFByb3BzLmhlaWdodCA/IGdldFRleHRQcm9wc0ZvckNvbnRyb2xIZWlnaHQocmVzdFByb3BzLmhlaWdodCkgOiB7fVxuICAgIGNvbnN0IGljb25TaXplID0gZ2V0SWNvblNpemVGb3JCdXR0b24oaGVpZ2h0KVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxCb3hcbiAgICAgICAgaXM9e2lzfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgY2xhc3NOYW1lPXtjeCh0aGVtZWRDbGFzc05hbWUsIGNsYXNzTmFtZSl9XG4gICAgICAgIGRhdGEtYWN0aXZlPXtpc0FjdGl2ZSB8fCB1bmRlZmluZWR9XG4gICAgICAgIHsuLi5ib3hQcm9wc31cbiAgICAgICAgey4uLnJlc3RQcm9wc31cbiAgICAgICAgey4uLnRleHRQcm9wc31cbiAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkIHx8IGlzTG9hZGluZ31cbiAgICAgID5cbiAgICAgICAge2lzTG9hZGluZyAmJiAoXG4gICAgICAgICAgPFNwaW5uZXJcbiAgICAgICAgICAgIG1hcmdpbkxlZnQ9ey1NYXRoLnJvdW5kKGhlaWdodCAvIDgpfVxuICAgICAgICAgICAgbWFyZ2luUmlnaHQ9e01hdGgucm91bmQoaGVpZ2h0IC8gNCl9XG4gICAgICAgICAgICBzaXplPXtNYXRoLnJvdW5kKGhlaWdodCAvIDIpfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxCdXR0b25JY29uIGljb249e2ljb25CZWZvcmV9IHNpemU9e2ljb25TaXplfSBzcGFjaW5nPXtyZXN0UHJvcHMucGFkZGluZ0xlZnR9IGVkZ2U9XCJzdGFydFwiIC8+XG4gICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPEJ1dHRvbkljb24gaWNvbj17aWNvbkFmdGVyfSBzaXplPXtpY29uU2l6ZX0gc3BhY2luZz17cmVzdFByb3BzLnBhZGRpbmdSaWdodH0gZWRnZT1cImVuZFwiIC8+XG4gICAgICA8L0JveD5cbiAgICApXG4gIH0pXG4pXG5cbkJ1dHRvbi5wcm9wVHlwZXMgPSB7XG4gIC8qKlxuICAgKiBDb21wb3NlcyB0aGUgZGltZW5zaW9ucyBzcGVjIGZyb20gdGhlIEJveCBwcmltaXRpdmUuXG4gICAqL1xuICAuLi5kaW1lbnNpb25zLnByb3BUeXBlcyxcblxuICAvKipcbiAgICogQ29tcG9zZXMgdGhlIHNwYWNpbmcgc3BlYyBmcm9tIHRoZSBCb3ggcHJpbWl0aXZlLlxuICAgKi9cbiAgLi4uc3BhY2luZy5wcm9wVHlwZXMsXG5cbiAgLyoqXG4gICAqIENvbXBvc2VzIHRoZSBwb3NpdGlvbiBzcGVjIGZyb20gdGhlIEJveCBwcmltaXRpdmUuXG4gICAqL1xuICAuLi5wb3NpdGlvbi5wcm9wVHlwZXMsXG5cbiAgLyoqXG4gICAqIENvbXBvc2VzIHRoZSBsYXlvdXQgc3BlYyBmcm9tIHRoZSBCb3ggcHJpbWl0aXZlLlxuICAgKi9cbiAgLi4ubGF5b3V0LnByb3BUeXBlcyxcblxuICAvKipcbiAgICogVGhlIGludGVudCBvZiB0aGUgYnV0dG9uLlxuICAgKi9cbiAgaW50ZW50OiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gIC8qKlxuICAgKiBUaGUgYXBwZWFyYW5jZSBvZiB0aGUgYnV0dG9uLlxuICAgKi9cbiAgYXBwZWFyYW5jZTogUHJvcFR5cGVzLnN0cmluZyxcblxuICAvKipcbiAgICogVGhlIHNpemUgb2YgdGhlIGJ1dHRvblxuICAgKi9cbiAgc2l6ZTogUHJvcFR5cGVzLm9uZU9mKFsnc21hbGwnLCAnbWVkaXVtJywgJ2xhcmdlJ10pLFxuXG4gIC8qKlxuICAgKiBXaGVuIHRydWUsIHNob3cgYSBsb2FkaW5nIHNwaW5uZXIgYmVmb3JlIHRoZSBjaGlsZHJlbi5cbiAgICogVGhpcyBhbHNvIGRpc2FibGVzIHRoZSBidXR0b24uXG4gICAqL1xuICBpc0xvYWRpbmc6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBGb3JjZWZ1bGx5IHNldCB0aGUgYWN0aXZlIHN0YXRlIG9mIGEgYnV0dG9uLlxuICAgKiBVc2VmdWwgaW4gY29uanVuY3Rpb24gd2l0aCBhIFBvcG92ZXIuXG4gICAqL1xuICBpc0FjdGl2ZTogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIFNldHMgYW4gaWNvbiBiZWZvcmUgdGhlIHRleHQuIENhbiBiZSBhbnkgaWNvbiBmcm9tIEV2ZXJncmVlbiBvciBhIGN1c3RvbSBlbGVtZW50LlxuICAgKi9cbiAgaWNvbkJlZm9yZTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmVsZW1lbnRUeXBlLCBQcm9wVHlwZXMuZWxlbWVudF0pLFxuXG4gIC8qKlxuICAgKiBTZXRzIGFuIGljb24gYWZ0ZXIgdGhlIHRleHQuIENhbiBiZSBhbnkgaWNvbiBmcm9tIEV2ZXJncmVlbiBvciBhIGN1c3RvbSBlbGVtZW50LlxuICAgKi9cbiAgaWNvbkFmdGVyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuZWxlbWVudFR5cGUsIFByb3BUeXBlcy5lbGVtZW50XSksXG5cbiAgLyoqXG4gICAqIFdoZW4gdHJ1ZSwgdGhlIGJ1dHRvbiBpcyBkaXNhYmxlZC5cbiAgICogaXNMb2FkaW5nIGFsc28gc2V0cyB0aGUgYnV0dG9uIHRvIGRpc2FibGVkLlxuICAgKi9cbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBDbGFzcyBuYW1lIHBhc3NlZCB0byB0aGUgYnV0dG9uLlxuICAgKiBPbmx5IHVzZSBpZiB5b3Uga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcuXG4gICAqL1xuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgQnV0dG9uXG4iXX0=