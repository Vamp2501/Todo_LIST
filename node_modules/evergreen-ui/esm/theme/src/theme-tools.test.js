import { getValue, mergeTheme, resolveThemeTokens } from './theme-tools';
describe('Theme tools', function () {
  describe('getValue', function () {
    it('returns the value based on a path lookup', function () {
      var obj = {
        foo: {
          bar: 'baz'
        }
      };
      var result = getValue(obj, 'foo.bar');
      expect(result).toEqual('baz');
    });
    it('returns the value as-is if the path cannot be resolved', function () {
      var obj = {
        foo: {
          bar: 'baz'
        }
      };
      var result = getValue(obj, '12px');
      expect(result).toEqual('12px');
    });
  });
  describe('mergeTheme', function () {
    it.each([undefined, null, {}])('should return unmodified destinationTheme when sourceTheme is %p', function (sourceTheme) {
      var destinationTheme = {
        colors: {
          gray900: '#101840',
          gray800: '#474d66',
          gray700: '#696f8c'
        }
      };
      var result = mergeTheme(destinationTheme, sourceTheme);
      expect(result).toStrictEqual(destinationTheme);
    });
    it('should override existing values', function () {
      var destinationTheme = {
        colors: {
          gray900: '#101840',
          gray800: '#474d66',
          gray700: '#696f8c'
        }
      };
      var sourceTheme = {
        colors: {
          gray700: 'updated'
        }
      };
      var result = mergeTheme(destinationTheme, sourceTheme);
      expect(result.colors.gray700).toBe(sourceTheme.colors.gray700);
    });
    it('should add new values without clobbering existing structure', function () {
      var destinationTheme = {
        components: {
          Button: {
            baseStyle: {
              _disabled: {
                cursor: 'not-allowed',
                pointerEvents: 'auto'
              }
            }
          }
        }
      };
      var sourceTheme = {
        components: {
          Button: {
            appearances: {
              tab: {
                _hover: {
                  backgroundColor: '#696f8c'
                },
                backgroundColor: 'white'
              }
            }
          }
        }
      };
      var result = mergeTheme(destinationTheme, sourceTheme);
      expect(result.components.Button.baseStyle).toMatchObject(destinationTheme.components.Button.baseStyle);
      expect(result.components.Button.appearances).toMatchObject(sourceTheme.components.Button.appearances);
    });
    it('should always return a new reference', function () {
      var destinationTheme = {
        colors: {
          gray900: '#101840',
          gray800: '#474d66',
          gray700: '#696f8c'
        }
      };
      var sourceTheme = {
        colors: {
          gray700: 'updated'
        }
      };
      var result = mergeTheme(destinationTheme, sourceTheme);
      expect(result).not.toEqual(destinationTheme);
    });
  });
  describe('resolveThemeTokens', function () {
    it('preserves nested object structures', function () {
      var theme = {};
      var props = {
        baseStyle: {
          color: 'blue'
        },
        appearances: {
          primary: {
            backgroundColor: 'pink'
          }
        }
      };
      var result = resolveThemeTokens(theme, props);
      expect(result).toEqual(props);
    });
    it('resolves keys if they exist in the theme', function () {
      var theme = {
        colors: {
          muted: 'gray',
          primary: 'pink'
        }
      };
      var props = {
        baseStyle: {
          color: 'colors.muted'
        },
        appearances: {
          primary: {
            backgroundColor: 'colors.primary'
          }
        }
      };
      var result = resolveThemeTokens(theme, props);
      expect(result).toEqual({
        baseStyle: {
          color: 'gray'
        },
        appearances: {
          primary: {
            backgroundColor: 'pink'
          }
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90aGVtZS9zcmMvdGhlbWUtdG9vbHMudGVzdC5qcyJdLCJuYW1lcyI6WyJnZXRWYWx1ZSIsIm1lcmdlVGhlbWUiLCJyZXNvbHZlVGhlbWVUb2tlbnMiLCJkZXNjcmliZSIsIml0Iiwib2JqIiwiZm9vIiwiYmFyIiwicmVzdWx0IiwiZXhwZWN0IiwidG9FcXVhbCIsImVhY2giLCJ1bmRlZmluZWQiLCJzb3VyY2VUaGVtZSIsImRlc3RpbmF0aW9uVGhlbWUiLCJjb2xvcnMiLCJncmF5OTAwIiwiZ3JheTgwMCIsImdyYXk3MDAiLCJ0b1N0cmljdEVxdWFsIiwidG9CZSIsImNvbXBvbmVudHMiLCJCdXR0b24iLCJiYXNlU3R5bGUiLCJfZGlzYWJsZWQiLCJjdXJzb3IiLCJwb2ludGVyRXZlbnRzIiwiYXBwZWFyYW5jZXMiLCJ0YWIiLCJfaG92ZXIiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0b01hdGNoT2JqZWN0Iiwibm90IiwidGhlbWUiLCJwcm9wcyIsImNvbG9yIiwicHJpbWFyeSIsIm11dGVkIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxRQUFULEVBQW1CQyxVQUFuQixFQUErQkMsa0JBQS9CLFFBQXlELGVBQXpEO0FBRUFDLFFBQVEsQ0FBQyxhQUFELEVBQWdCLFlBQU07QUFDNUJBLEVBQUFBLFFBQVEsQ0FBQyxVQUFELEVBQWEsWUFBTTtBQUN6QkMsSUFBQUEsRUFBRSxDQUFDLDBDQUFELEVBQTZDLFlBQU07QUFDbkQsVUFBTUMsR0FBRyxHQUFHO0FBQ1ZDLFFBQUFBLEdBQUcsRUFBRTtBQUNIQyxVQUFBQSxHQUFHLEVBQUU7QUFERjtBQURLLE9BQVo7QUFNQSxVQUFNQyxNQUFNLEdBQUdSLFFBQVEsQ0FBQ0ssR0FBRCxFQUFNLFNBQU4sQ0FBdkI7QUFDQUksTUFBQUEsTUFBTSxDQUFDRCxNQUFELENBQU4sQ0FBZUUsT0FBZixDQUF1QixLQUF2QjtBQUNELEtBVEMsQ0FBRjtBQVdBTixJQUFBQSxFQUFFLENBQUMsd0RBQUQsRUFBMkQs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QUY7QUFpQkE5QixJQUFBQSxFQUFFLENBQUMsMENBQUQsRUFBNkMsWUFBTTtBQUNuRCxVQUFNNkIsS0FBSyxHQUFHO0FBQ1psQixRQUFBQSxNQUFNLEVBQUU7QUFDTnNCLFVBQUFBLEtBQUssRUFBRSxNQUREO0FBRU5ELFVBQUFBLE9BQU8sRUFBRTtBQUZIO0FBREksT0FBZDtBQU9BLFVBQU1GLEtBQUssR0FBRztBQUNaWCxRQUFBQSxTQUFTLEVBQUU7QUFDVFksVUFBQUEsS0FBSyxFQUFFO0FBREUsU0FEQztBQUlaUixRQUFBQSxXQUFXLEVBQUU7QUFDWFMsVUFBQUEsT0FBTyxFQUFFO0FBQ1BOLFlBQUFBLGVBQWUsRUFBRTtBQURWO0FBREU7QUFKRCxPQUFkO0FBV0EsVUFBTXRCLE1BQU0sR0FBR04sa0JBQWtCLENBQUMrQixLQUFELEVBQVFDLEtBQVIsQ0FBakM7QUFDQXpCLE1BQUFBLE1BQU0sQ0FBQ0QsTUFBRCxDQUFOLENBQWVFLE9BQWYsQ0FBdUI7QUFDckJhLFFBQUFBLFNBQVMsRUFBRTtBQUNUWSxVQUFBQSxLQUFLLEVBQUU7QUFERSxTQURVO0FBSXJCUixRQUFBQSxXQUFXLEVBQUU7QUFDWFMsVUFBQUEsT0FBTyxFQUFFO0FBQ1BOLFlBQUFBLGVBQWUsRUFBRTtBQURWO0FBREU7QUFKUSxPQUF2QjtBQVVELEtBOUJDLENBQUY7QUErQkQsR0FqRE8sQ0FBUjtBQWtERCxDQXRLTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0VmFsdWUsIG1lcmdlVGhlbWUsIHJlc29sdmVUaGVtZVRva2VucyB9IGZyb20gJy4vdGhlbWUtdG9vbHMnXG5cbmRlc2NyaWJlKCdUaGVtZSB0b29scycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2dldFZhbHVlJywgKCkgPT4ge1xuICAgIGl0KCdyZXR1cm5zIHRoZSB2YWx1ZSBiYXNlZCBvbiBhIHBhdGggbG9va3VwJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2JqID0ge1xuICAgICAgICBmb286IHtcbiAgICAgICAgICBiYXI6ICdiYXonXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0VmFsdWUob2JqLCAnZm9vLmJhcicpXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKCdiYXonKVxuICAgIH0pXG5cbiAgICBpdCgncmV0dXJucyB0aGUgdmFsdWUgYXMtaXMgaWYgdGhlIHBhdGggY2Fubm90IGJlIHJlc29sdmVkJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb2JqID0ge1xuICAgICAgICBmb286IHtcbiAgICAgICAgICBiYXI6ICdiYXonXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0VmFsdWUob2JqLCAnMTJweCcpXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKCcxMnB4JylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdtZXJnZVRoZW1lJywgKCkgPT4ge1xuICAgIGl0LmVhY2goW3VuZGVmaW5lZCwgbnVsbCwge31dKSgnc2hvdWxkIHJldHVybiB1bm1vZGlmaWVkIGRlc3RpbmF0aW9uVGhlbWUgd2hlbiBzb3VyY2VUaGVtZSBpcyAlcCcsIHNvdXJjZVRoZW1lID0+IHtcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uVGhlbWUgPSB7XG4gICAgICAgIGNvbG9yczoge1xuICAgICAgICAgIGdyYXk5MDA6ICcjMTAxODQwJyxcbiAgICAgICAgICBncmF5ODAwOiAnIzQ3NGQ2NicsXG4gICAgICAgICAgZ3JheTcwMDogJyM2OTZmOGMnXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gbWVyZ2VUaGVtZShkZXN0aW5hdGlvblRoZW1lLCBzb3VyY2VUaGVtZSlcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9TdHJpY3RFcXVhbChkZXN0aW5hdGlvblRoZW1lKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIG92ZXJyaWRlIGV4aXN0aW5nIHZhbHVlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uVGhlbWUgPSB7XG4gICAgICAgIGNvbG9yczoge1xuICAgICAgICAgIGdyYXk5MDA6ICcjMTAxODQwJyxcbiAgICAgICAgICBncmF5ODAwOiAnIzQ3NGQ2NicsXG4gICAgICAgICAgZ3JheTcwMDogJyM2OTZmOGMnXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc291cmNlVGhlbWUgPSB7XG4gICAgICAgIGNvbG9yczoge1xuICAgICAgICAgIGdyYXk3MDA6ICd1cGRhdGVkJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IG1lcmdlVGhlbWUoZGVzdGluYXRpb25UaGVtZSwgc291cmNlVGhlbWUpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY29sb3JzLmdyYXk3MDApLnRvQmUoc291cmNlVGhlbWUuY29sb3JzLmdyYXk3MDApXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgYWRkIG5ldyB2YWx1ZXMgd2l0aG91dCBjbG9iYmVyaW5nIGV4aXN0aW5nIHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uVGhlbWUgPSB7XG4gICAgICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgICBCdXR0b246IHtcbiAgICAgICAgICAgIGJhc2VTdHlsZToge1xuICAgICAgICAgICAgICBfZGlzYWJsZWQ6IHtcbiAgICAgICAgICAgICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ2F1dG8nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc291cmNlVGhlbWUgPSB7XG4gICAgICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgICBCdXR0b246IHtcbiAgICAgICAgICAgIGFwcGVhcmFuY2VzOiB7XG4gICAgICAgICAgICAgIHRhYjoge1xuICAgICAgICAgICAgICAgIF9ob3Zlcjoge1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzY5NmY4YydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IG1lcmdlVGhlbWUoZGVzdGluYXRpb25UaGVtZSwgc291cmNlVGhlbWUpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcG9uZW50cy5CdXR0b24uYmFzZVN0eWxlKS50b01hdGNoT2JqZWN0KGRlc3RpbmF0aW9uVGhlbWUuY29tcG9uZW50cy5CdXR0b24uYmFzZVN0eWxlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wb25lbnRzLkJ1dHRvbi5hcHBlYXJhbmNlcykudG9NYXRjaE9iamVjdChzb3VyY2VUaGVtZS5jb21wb25lbnRzLkJ1dHRvbi5hcHBlYXJhbmNlcylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBhbHdheXMgcmV0dXJuIGEgbmV3IHJlZmVyZW5jZScsICgpID0+IHtcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uVGhlbWUgPSB7XG4gICAgICAgIGNvbG9yczoge1xuICAgICAgICAgIGdyYXk5MDA6ICcjMTAxODQwJyxcbiAgICAgICAgICBncmF5ODAwOiAnIzQ3NGQ2NicsXG4gICAgICAgICAgZ3JheTcwMDogJyM2OTZmOGMnXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc291cmNlVGhlbWUgPSB7XG4gICAgICAgIGNvbG9yczoge1xuICAgICAgICAgIGdyYXk3MDA6ICd1cGRhdGVkJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IG1lcmdlVGhlbWUoZGVzdGluYXRpb25UaGVtZSwgc291cmNlVGhlbWUpXG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLm5vdC50b0VxdWFsKGRlc3RpbmF0aW9uVGhlbWUpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgncmVzb2x2ZVRoZW1lVG9rZW5zJywgKCkgPT4ge1xuICAgIGl0KCdwcmVzZXJ2ZXMgbmVzdGVkIG9iamVjdCBzdHJ1Y3R1cmVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGhlbWUgPSB7fVxuICAgICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICAgIGJhc2VTdHlsZToge1xuICAgICAgICAgIGNvbG9yOiAnYmx1ZSdcbiAgICAgICAgfSxcbiAgICAgICAgYXBwZWFyYW5jZXM6IHtcbiAgICAgICAgICBwcmltYXJ5OiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdwaW5rJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSByZXNvbHZlVGhlbWVUb2tlbnModGhlbWUsIHByb3BzKVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChwcm9wcylcbiAgICB9KVxuXG4gICAgaXQoJ3Jlc29sdmVzIGtleXMgaWYgdGhleSBleGlzdCBpbiB0aGUgdGhlbWUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0aGVtZSA9IHtcbiAgICAgICAgY29sb3JzOiB7XG4gICAgICAgICAgbXV0ZWQ6ICdncmF5JyxcbiAgICAgICAgICBwcmltYXJ5OiAncGluaydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgYmFzZVN0eWxlOiB7XG4gICAgICAgICAgY29sb3I6ICdjb2xvcnMubXV0ZWQnXG4gICAgICAgIH0sXG4gICAgICAgIGFwcGVhcmFuY2VzOiB7XG4gICAgICAgICAgcHJpbWFyeToge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnY29sb3JzLnByaW1hcnknXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc29sdmVUaGVtZVRva2Vucyh0aGVtZSwgcHJvcHMpXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgYmFzZVN0eWxlOiB7XG4gICAgICAgICAgY29sb3I6ICdncmF5J1xuICAgICAgICB9LFxuICAgICAgICBhcHBlYXJhbmNlczoge1xuICAgICAgICAgIHByaW1hcnk6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3BpbmsnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG59KVxuIl19