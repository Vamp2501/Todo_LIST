"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _typeof = require("@babel/runtime/helpers/typeof");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _uiBox = _interopRequireDefault(require("ui-box"));

var _hooks = require("../../hooks");

var _IconWrapper = require("../../icons/src/IconWrapper");

var _layers = require("../../layers");

var _typography = require("../../typography");

var _excluded = ["is", "children", "className", "appearance", "disabled", "secondaryText", "intent", "icon", "onSelect"],
    _excluded2 = ["className"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

var noop = function noop() {};

var pseudoSelectors = {
  _hover: '&[data-isselectable="true"]:not([aria-current="true"]):not([aria-checked="true"]):not(:focus):not(:active):hover',
  _focus: '&[data-isselectable="true"]:not([aria-current="true"]):not([aria-checked="true"]):focus, &[aria-selected="true"]',
  _active: '&[aria-current="true"], &[data-isselectable="true"]:active',
  _current: '&[aria-current="true"], &[aria-checked="true"]',
  _isSelectable: '&[data-isselectable="true"]',
  _disabled: '&:disabled, &[aria-disabled="true"]'
};
var internalStyles = {
  display: 'flex',
  alignItems: 'center'
};
var MenuItem = /*#__PURE__*/(0, _react.memo)( /*#__PURE__*/(0, _react.forwardRef)(function MenuItem(props, ref) {
  var _props$is = props.is,
      is = _props$is === void 0 ? 'div' : _props$is,
      children = props.children,
      className = props.className,
      _props$appearance = props.appearance,
      appearance = _props$appearance === void 0 ? 'default' : _props$appearance,
      disabled = props.disabled,
      secondaryText = props.secondaryText,
      _props$intent = props.intent,
      intent = _props$intent === void 0 ? 'none' : _props$intent,
      icon = props.icon,
      _props$onSelect = props.onSelect,
      onSelect = _props$onSelect === void 0 ? noop : _props$onSelect,
      passthroughProps = (0, _objectWithoutProperties2["default"])(props, _excluded);
  var handleClick = (0, _react.useCallback)(function (event) {
    if (disabled) return;
    onSelect(event);
  }, [disabled, onSelect]); // Pass all props, so the hook can handled `disabled`, `onKeyDown`, `tabIndex`
  // and any other explicit props that are passed through to the underlying component

  var _useClickable = (0, _hooks.useClickable)(props),
      onKeyDown = _useClickable.onKeyDown,
      tabIndex = _useClickable.tabIndex;

  var _useStyleConfig = (0, _hooks.useStyleConfig)('MenuItem', {
    appearance: appearance
  }, pseudoSelectors, internalStyles),
      themedClassName = _useStyleConfig.className,
      boxProps = (0, _objectWithoutProperties2["default"])(_useStyleConfig, _excluded2);

  var iconColor = intent === 'none' ? 'default' : intent;

  if (disabled) {
    iconColor = 'disabled';
  }

  var textColor = disabled ? 'disabled' : intent;
  var secondaryTextColor = disabled ? textColor : 'muted';
  var disabledProps = (0, _react.useMemo)(function () {
    return disabled ? {
      backgroundColor: 'tint1',
      cursor: 'not-allowed',
      disabled: true,
      onClick: null,
      onKeyPress: null,
      tabIndex: -1,
      'aria-disabled': 'true',
      'data-isselectable': 'false'
    } : {};
  }, [disabled]);
  return /*#__PURE__*/_react["default"].createElement(_layers.Pane, (0, _extends2["default"])({
    is: is,
    role: "menuitem",
    className: (0, _classnames["default"])(themedClassName, className),
    onClick: handleClick,
    "data-isselectable": !disabled || undefined,
    "aria-disabled": disabled,
    ref: ref,
    height: icon ? 40 : 32
  }, boxProps, passthroughProps, disabledProps, {
    tabIndex: tabIndex,
    onKeyDown: onKeyDown
  }), /*#__PURE__*/_react["default"].createElement(_IconWrapper.IconWrapper, {
    icon: icon,
    color: disabled ? 'disabled' : iconColor,
    marginLeft: 16,
    marginRight: -4,
    size: 16,
    flexShrink: 0
  }), /*#__PURE__*/_react["default"].createElement(_typography.Text, {
    color: textColor,
    marginLeft: 16,
    marginRight: 16,
    flex: 1
  }, children), secondaryText && /*#__PURE__*/_react["default"].createElement(_typography.Text, {
    marginRight: 16,
    color: secondaryTextColor
  }, secondaryText));
}));
MenuItem.propTypes = {
  /**
   * Element type to use for the menu item.
   * For example: `<MenuItem is={ReactRouterLink}>...</MenuItem>`
   */
  is: _uiBox["default"].propTypes.is,

  /**
   * Class name passed to the component.
   * Only use if you know what you are doing.
   */
  className: _propTypes["default"].string,

  /**
   * Function that is called on click and enter/space keypress.
   */
  onSelect: _propTypes["default"].func,

  /**
   * The Evergreen or custom icon before the label.
   */
  icon: _propTypes["default"].oneOfType([_propTypes["default"].elementType, _propTypes["default"].element]),

  /**
   * The children of the component.
   */
  children: _propTypes["default"].node,

  /**
   * Secondary text shown on the right.
   */
  secondaryText: _propTypes["default"].node,

  /**
   * The default theme only supports one default appearance.
   */
  appearance: _propTypes["default"].string,

  /**
   * The intent of the menu item.
   */
  intent: _propTypes["default"].string,

  /**
   * Flag to indicate whether the menu item is disabled or not
   */
  disabled: _propTypes["default"].bool
};
var _default = MenuItem;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tZW51L3NyYy9NZW51SXRlbS5qcyJdLCJuYW1lcyI6WyJub29wIiwicHNldWRvU2VsZWN0b3JzIiwiX2hvdmVyIiwiX2ZvY3VzIiwiX2FjdGl2ZSIsIl9jdXJyZW50IiwiX2lzU2VsZWN0YWJsZSIsIl9kaXNhYmxlZCIsImludGVybmFsU3R5bGVzIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJNZW51SXRlbSIsInByb3BzIiwicmVmIiwiaXMiLCJjaGlsZHJlbiIsImNsYXNzTmFtZSIsImFwcGVhcmFuY2UiLCJkaXNhYmxlZCIsInNlY29uZGFyeVRleHQiLCJpbnRlbnQiLCJpY29uIiwib25TZWxlY3QiLCJwYXNzdGhyb3VnaFByb3BzIiwiaGFuZGxlQ2xpY2siLCJldmVudCIsIm9uS2V5RG93biIsInRhYkluZGV4IiwidGhlbWVkQ2xhc3NOYW1lIiwiYm94UHJvcHMiLCJpY29uQ29sb3IiLCJ0ZXh0Q29sb3IiLCJzZWNvbmRhcnlUZXh0Q29sb3IiLCJkaXNhYmxlZFByb3BzIiwiYmFja2dyb3VuZENvbG9yIiwiY3Vyc29yIiwib25DbGljayIsIm9uS2V5UHJlc3MiLCJ1bmRlZmluZWQiLCJwcm9wVHlwZXMiLCJCb3giLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJmdW5jIiwib25lT2ZUeXBlIiwiZWxlbWVudFR5cGUiLCJlbGVtZW50Iiwibm9kZSIsImJvb2wiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7QUFFQSxJQUFNQSxJQUFJLEdBQUcsU0FBUEEsSUFBTyxHQUFNLENBQUUsQ0FBckI7O0FBRUEsSUFBTUMsZUFBZSxHQUFHO0FBQ3RCQyxFQUFBQSxNQUFNLEVBQ0osa0hBRm9CO0FBR3RCQyxFQUFBQSxNQUFNLEVBQ0osa0hBSm9CO0FBS3RCQyxFQUFBQSxPQUFPLEVBQUUsNERBTGE7QUFNdEJDLEVBQUFBLFFBQVEsRUFBRSxn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RUFBRW9CLHNCQUFVRyxTQUFWLENBQW9CLENBQUNILHNCQUFVSSxXQUFYLEVBQXdCSixzQkFBVUssT0FBbEMsQ0FBcEIsQ0FyQmE7O0FBdUJuQjtBQUNGO0FBQ0E7QUFDRS9CLEVBQUFBLFFBQVEsRUFBRTBCLHNCQUFVTSxJQTFCRDs7QUE0Qm5CO0FBQ0Y7QUFDQTtBQUNFNUIsRUFBQUEsYUFBYSxFQUFFc0Isc0JBQVVNLElBL0JOOztBQWlDbkI7QUFDRjtBQUNBO0FBQ0U5QixFQUFBQSxVQUFVLEVBQUV3QixzQkFBVUMsTUFwQ0g7O0FBc0NuQjtBQUNGO0FBQ0E7QUFDRXRCLEVBQUFBLE1BQU0sRUFBRXFCLHNCQUFVQyxNQXpDQzs7QUEyQ25CO0FBQ0Y7QUFDQTtBQUNFeEIsRUFBQUEsUUFBUSxFQUFFdUIsc0JBQVVPO0FBOUNELENBQXJCO2VBaURlckMsUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBtZW1vLCBmb3J3YXJkUmVmLCB1c2VNZW1vLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnXG5pbXBvcnQgQm94IGZyb20gJ3VpLWJveCdcbmltcG9ydCB7IHVzZUNsaWNrYWJsZSwgdXNlU3R5bGVDb25maWcgfSBmcm9tICcuLi8uLi9ob29rcydcbmltcG9ydCB7IEljb25XcmFwcGVyIH0gZnJvbSAnLi4vLi4vaWNvbnMvc3JjL0ljb25XcmFwcGVyJ1xuaW1wb3J0IHsgUGFuZSB9IGZyb20gJy4uLy4uL2xheWVycydcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuLi8uLi90eXBvZ3JhcGh5J1xuXG5jb25zdCBub29wID0gKCkgPT4ge31cblxuY29uc3QgcHNldWRvU2VsZWN0b3JzID0ge1xuICBfaG92ZXI6XG4gICAgJyZbZGF0YS1pc3NlbGVjdGFibGU9XCJ0cnVlXCJdOm5vdChbYXJpYS1jdXJyZW50PVwidHJ1ZVwiXSk6bm90KFthcmlhLWNoZWNrZWQ9XCJ0cnVlXCJdKTpub3QoOmZvY3VzKTpub3QoOmFjdGl2ZSk6aG92ZXInLFxuICBfZm9jdXM6XG4gICAgJyZbZGF0YS1pc3NlbGVjdGFibGU9XCJ0cnVlXCJdOm5vdChbYXJpYS1jdXJyZW50PVwidHJ1ZVwiXSk6bm90KFthcmlhLWNoZWNrZWQ9XCJ0cnVlXCJdKTpmb2N1cywgJlthcmlhLXNlbGVjdGVkPVwidHJ1ZVwiXScsXG4gIF9hY3RpdmU6ICcmW2FyaWEtY3VycmVudD1cInRydWVcIl0sICZbZGF0YS1pc3NlbGVjdGFibGU9XCJ0cnVlXCJdOmFjdGl2ZScsXG4gIF9jdXJyZW50OiAnJlthcmlhLWN1cnJlbnQ9XCJ0cnVlXCJdLCAmW2FyaWEtY2hlY2tlZD1cInRydWVcIl0nLFxuICBfaXNTZWxlY3RhYmxlOiAnJltkYXRhLWlzc2VsZWN0YWJsZT1cInRydWVcIl0nLFxuICBfZGlzYWJsZWQ6ICcmOmRpc2FibGVkLCAmW2FyaWEtZGlzYWJsZWQ9XCJ0cnVlXCJdJ1xufVxuXG5jb25zdCBpbnRlcm5hbFN0eWxlcyA9IHtcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJ1xufVxuXG5jb25zdCBNZW51SXRlbSA9IG1lbW8oXG4gIGZvcndhcmRSZWYoZnVuY3Rpb24gTWVudUl0ZW0ocHJvcHMsIHJlZikge1xuICAgIGNvbnN0IHtcbiAgICAgIGlzID0gJ2RpdicsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGFwcGVhcmFuY2UgPSAnZGVmYXVsdCcsXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIHNlY29uZGFyeVRleHQsXG4gICAgICBpbnRlbnQgPSAnbm9uZScsXG4gICAgICBpY29uLFxuICAgICAgb25TZWxlY3QgPSBub29wLFxuICAgICAgLi4ucGFzc3Rocm91Z2hQcm9wc1xuICAgIH0gPSBwcm9wc1xuXG4gICAgY29uc3QgaGFuZGxlQ2xpY2sgPSB1c2VDYWxsYmFjayhcbiAgICAgIGV2ZW50ID0+IHtcbiAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm5cbiAgICAgICAgb25TZWxlY3QoZXZlbnQpXG4gICAgICB9LFxuICAgICAgW2Rpc2FibGVkLCBvblNlbGVjdF1cbiAgICApXG5cbiAgICAvLyBQYXNzIGFsbCBwcm9wcywgc28gdGhlIGhvb2sgY2FuIGhhbmRsZWQgYGRpc2FibGVkYCwgYG9uS2V5RG93bmAsIGB0YWJJbmRleGBcbiAgICAvLyBhbmQgYW55IG90aGVyIGV4cGxpY2l0IHByb3BzIHRoYXQgYXJlIHBhc3NlZCB0aHJvdWdoIHRvIHRoZSB1bmRlcmx5aW5nIGNvbXBvbmVudFxuICAgIGNvbnN0IHsgb25LZXlEb3duLCB0YWJJbmRleCB9ID0gdXNlQ2xpY2thYmxlKHByb3BzKVxuXG4gICAgY29uc3QgeyBjbGFzc05hbWU6IHRoZW1lZENsYXNzTmFtZSwgLi4uYm94UHJvcHMgfSA9IHVzZVN0eWxlQ29uZmlnKFxuICAgICAgJ01lbnVJdGVtJyxcbiAgICAgIHsgYXBwZWFyYW5jZSB9LFxuICAgICAgcHNldWRvU2VsZWN0b3JzLFxuICAgICAgaW50ZXJuYWxTdHlsZXNcbiAgICApXG5cbiAgICBsZXQgaWNvbkNvbG9yID0gaW50ZW50ID09PSAnbm9uZScgPyAnZGVmYXVsdCcgOiBpbnRlbnRcblxuICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgaWNvbkNvbG9yID0gJ2Rpc2FibGVkJ1xuICAgIH1cblxuICAgIGNvbnN0IHRleHRDb2xvciA9IGRpc2FibGVkID8gJ2Rpc2FibGVkJyA6IGludGVudFxuXG4gICAgY29uc3Qgc2Vjb25kYXJ5VGV4dENvbG9yID0gZGlzYWJsZWQgPyB0ZXh0Q29sb3IgOiAnbXV0ZWQnXG5cbiAgICBjb25zdCBkaXNhYmxlZFByb3BzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gZGlzYWJsZWRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0aW50MScsXG4gICAgICAgICAgICBjdXJzb3I6ICdub3QtYWxsb3dlZCcsXG4gICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IG51bGwsXG4gICAgICAgICAgICBvbktleVByZXNzOiBudWxsLFxuICAgICAgICAgICAgdGFiSW5kZXg6IC0xLFxuICAgICAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiAndHJ1ZScsXG4gICAgICAgICAgICAnZGF0YS1pc3NlbGVjdGFibGUnOiAnZmFsc2UnXG4gICAgICAgICAgfVxuICAgICAgICA6IHt9XG4gICAgfSwgW2Rpc2FibGVkXSlcblxuICAgIHJldHVybiAoXG4gICAgICA8UGFuZVxuICAgICAgICBpcz17aXN9XG4gICAgICAgIHJvbGU9XCJtZW51aXRlbVwiXG4gICAgICAgIGNsYXNzTmFtZT17Y3godGhlbWVkQ2xhc3NOYW1lLCBjbGFzc05hbWUpfVxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja31cbiAgICAgICAgZGF0YS1pc3NlbGVjdGFibGU9eyFkaXNhYmxlZCB8fCB1bmRlZmluZWR9XG4gICAgICAgIGFyaWEtZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICByZWY9e3JlZn1cbiAgICAgICAgaGVpZ2h0PXtpY29uID8gNDAgOiAzMn1cbiAgICAgICAgey4uLmJveFByb3BzfVxuICAgICAgICB7Li4ucGFzc3Rocm91Z2hQcm9wc31cbiAgICAgICAgey4uLmRpc2FibGVkUHJvcHN9XG4gICAgICAgIHRhYkluZGV4PXt0YWJJbmRleH1cbiAgICAgICAgb25LZXlEb3duPXtvbktleURvd259XG4gICAgICA+XG4gICAgICAgIDxJY29uV3JhcHBlclxuICAgICAgICAgIGljb249e2ljb259XG4gICAgICAgICAgY29sb3I9e2Rpc2FibGVkID8gJ2Rpc2FibGVkJyA6IGljb25Db2xvcn1cbiAgICAgICAgICBtYXJnaW5MZWZ0PXsxNn1cbiAgICAgICAgICBtYXJnaW5SaWdodD17LTR9XG4gICAgICAgICAgc2l6ZT17MTZ9XG4gICAgICAgICAgZmxleFNocmluaz17MH1cbiAgICAgICAgLz5cbiAgICAgICAgPFRleHQgY29sb3I9e3RleHRDb2xvcn0gbWFyZ2luTGVmdD17MTZ9IG1hcmdpblJpZ2h0PXsxNn0gZmxleD17MX0+XG4gICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICA8L1RleHQ+XG4gICAgICAgIHtzZWNvbmRhcnlUZXh0ICYmIChcbiAgICAgICAgICA8VGV4dCBtYXJnaW5SaWdodD17MTZ9IGNvbG9yPXtzZWNvbmRhcnlUZXh0Q29sb3J9PlxuICAgICAgICAgICAge3NlY29uZGFyeVRleHR9XG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICApfVxuICAgICAgPC9QYW5lPlxuICAgIClcbiAgfSlcbilcblxuTWVudUl0ZW0ucHJvcFR5cGVzID0ge1xuICAvKipcbiAgICogRWxlbWVudCB0eXBlIHRvIHVzZSBmb3IgdGhlIG1lbnUgaXRlbS5cbiAgICogRm9yIGV4YW1wbGU6IGA8TWVudUl0ZW0gaXM9e1JlYWN0Um91dGVyTGlua30+Li4uPC9NZW51SXRlbT5gXG4gICAqL1xuICBpczogQm94LnByb3BUeXBlcy5pcyxcblxuICAvKipcbiAgICogQ2xhc3MgbmFtZSBwYXNzZWQgdG8gdGhlIGNvbXBvbmVudC5cbiAgICogT25seSB1c2UgaWYgeW91IGtub3cgd2hhdCB5b3UgYXJlIGRvaW5nLlxuICAgKi9cbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBvbiBjbGljayBhbmQgZW50ZXIvc3BhY2Uga2V5cHJlc3MuXG4gICAqL1xuICBvblNlbGVjdDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIFRoZSBFdmVyZ3JlZW4gb3IgY3VzdG9tIGljb24gYmVmb3JlIHRoZSBsYWJlbC5cbiAgICovXG4gIGljb246IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5lbGVtZW50VHlwZSwgUHJvcFR5cGVzLmVsZW1lbnRdKSxcblxuICAvKipcbiAgICogVGhlIGNoaWxkcmVuIG9mIHRoZSBjb21wb25lbnQuXG4gICAqL1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm5vZGUsXG5cbiAgLyoqXG4gICAqIFNlY29uZGFyeSB0ZXh0IHNob3duIG9uIHRoZSByaWdodC5cbiAgICovXG4gIHNlY29uZGFyeVRleHQ6IFByb3BUeXBlcy5ub2RlLFxuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCB0aGVtZSBvbmx5IHN1cHBvcnRzIG9uZSBkZWZhdWx0IGFwcGVhcmFuY2UuXG4gICAqL1xuICBhcHBlYXJhbmNlOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gIC8qKlxuICAgKiBUaGUgaW50ZW50IG9mIHRoZSBtZW51IGl0ZW0uXG4gICAqL1xuICBpbnRlbnQ6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgLyoqXG4gICAqIEZsYWcgdG8gaW5kaWNhdGUgd2hldGhlciB0aGUgbWVudSBpdGVtIGlzIGRpc2FibGVkIG9yIG5vdFxuICAgKi9cbiAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sXG59XG5cbmV4cG9ydCBkZWZhdWx0IE1lbnVJdGVtXG4iXX0=