"use strict";

var _themeTools = require("./theme-tools");

describe('Theme tools', function () {
  describe('getValue', function () {
    it('returns the value based on a path lookup', function () {
      var obj = {
        foo: {
          bar: 'baz'
        }
      };
      var result = (0, _themeTools.getValue)(obj, 'foo.bar');
      expect(result).toEqual('baz');
    });
    it('returns the value as-is if the path cannot be resolved', function () {
      var obj = {
        foo: {
          bar: 'baz'
        }
      };
      var result = (0, _themeTools.getValue)(obj, '12px');
      expect(result).toEqual('12px');
    });
  });
  describe('mergeTheme', function () {
    it.each([undefined, null, {}])('should return unmodified destinationTheme when sourceTheme is %p', function (sourceTheme) {
      var destinationTheme = {
        colors: {
          gray900: '#101840',
          gray800: '#474d66',
          gray700: '#696f8c'
        }
      };
      var result = (0, _themeTools.mergeTheme)(destinationTheme, sourceTheme);
      expect(result).toStrictEqual(destinationTheme);
    });
    it('should override existing values', function () {
      var destinationTheme = {
        colors: {
          gray900: '#101840',
          gray800: '#474d66',
          gray700: '#696f8c'
        }
      };
      var sourceTheme = {
        colors: {
          gray700: 'updated'
        }
      };
      var result = (0, _themeTools.mergeTheme)(destinationTheme, sourceTheme);
      expect(result.colors.gray700).toBe(sourceTheme.colors.gray700);
    });
    it('should add new values without clobbering existing structure', function () {
      var destinationTheme = {
        components: {
          Button: {
            baseStyle: {
              _disabled: {
                cursor: 'not-allowed',
                pointerEvents: 'auto'
              }
            }
          }
        }
      };
      var sourceTheme = {
        components: {
          Button: {
            appearances: {
              tab: {
                _hover: {
                  backgroundColor: '#696f8c'
                },
                backgroundColor: 'white'
              }
            }
          }
        }
      };
      var result = (0, _themeTools.mergeTheme)(destinationTheme, sourceTheme);
      expect(result.components.Button.baseStyle).toMatchObject(destinationTheme.components.Button.baseStyle);
      expect(result.components.Button.appearances).toMatchObject(sourceTheme.components.Button.appearances);
    });
    it('should always return a new reference', function () {
      var destinationTheme = {
        colors: {
          gray900: '#101840',
          gray800: '#474d66',
          gray700: '#696f8c'
        }
      };
      var sourceTheme = {
        colors: {
          gray700: 'updated'
        }
      };
      var result = (0, _themeTools.mergeTheme)(destinationTheme, sourceTheme);
      expect(result).not.toEqual(destinationTheme);
    });
  });
  describe('resolveThemeTokens', function () {
    it('preserves nested object structures', function () {
      var theme = {};
      var props = {
        baseStyle: {
          color: 'blue'
        },
        appearances: {
          primary: {
            backgroundColor: 'pink'
          }
        }
      };
      var result = (0, _themeTools.resolveThemeTokens)(theme, props);
      expect(result).toEqual(props);
    });
    it('resolves keys if they exist in the theme', function () {
      var theme = {
        colors: {
          muted: 'gray',
          primary: 'pink'
        }
      };
      var props = {
        baseStyle: {
          color: 'colors.muted'
        },
        appearances: {
          primary: {
            backgroundColor: 'colors.primary'
          }
        }
      };
      var result = (0, _themeTools.resolveThemeTokens)(theme, props);
      expect(result).toEqual({
        baseStyle: {
          color: 'gray'
        },
        appearances: {
          primary: {
            backgroundColor: 'pink'
          }
        }
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90aGVtZS9zcmMvdGhlbWUtdG9vbHMudGVzdC5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0Iiwib2JqIiwiZm9vIiwiYmFyIiwicmVzdWx0IiwiZXhwZWN0IiwidG9FcXVhbCIsImVhY2giLCJ1bmRlZmluZWQiLCJzb3VyY2VUaGVtZSIsImRlc3RpbmF0aW9uVGhlbWUiLCJjb2xvcnMiLCJncmF5OTAwIiwiZ3JheTgwMCIsImdyYXk3MDAiLCJ0b1N0cmljdEVxdWFsIiwidG9CZSIsImNvbXBvbmVudHMiLCJCdXR0b24iLCJiYXNlU3R5bGUiLCJfZGlzYWJsZWQiLCJjdXJzb3IiLCJwb2ludGVyRXZlbnRzIiwiYXBwZWFyYW5jZXMiLCJ0YWIiLCJfaG92ZXIiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0b01hdGNoT2JqZWN0Iiwibm90IiwidGhlbWUiLCJwcm9wcyIsImNvbG9yIiwicHJpbWFyeSIsIm11dGVkIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUVBQSxRQUFRLENBQUMsYUFBRCxFQUFnQixZQUFNO0FBQzVCQSxFQUFBQSxRQUFRLENBQUMsVUFBRCxFQUFhLFlBQU07QUFDekJDLElBQUFBLEVBQUUsQ0FBQywwQ0FBRCxFQUE2QyxZQUFNO0FBQ25ELFVBQU1DLEdBQUcsR0FBRztBQUNWQyxRQUFBQSxHQUFHLEVBQUU7QUFDSEMsVUFBQUEsR0FBRyxFQUFFO0FBREY7QUFESyxPQUFaO0FBTUEsVUFBTUMsTUFBTSxHQUFHLDBCQUFTSCxHQUFULEVBQWMsU0FBZCxDQUFmO0FBQ0FJLE1BQUFBLE1BQU0sQ0FBQ0QsTUFBRCxDQUFOLENBQWVFLE9BQWYsQ0FBdUIsS0FBdkI7QUFDRCxLQVRDLENBQUY7QUFXQU4sSUFBQUEsRUFBRSxDQUFDLHdEQUFELEVBQTJELFlBQU07QUFDakUsVUFBTUMsR0FBRyxHQUFHO0FBQ1ZDLFFBQUFBLEdBQUcsRUFBRTtBQUNIQyxVQUFBQSxHQUFHLEVBQUU7QUFERjtBQURLLE9BQVo7QUFNQSxVQUFNQyxN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QU8sRUFBRTtBQUZIO0FBREksT0FBZDtBQU9BLFVBQU1GLEtBQUssR0FBRztBQUNaWCxRQUFBQSxTQUFTLEVBQUU7QUFDVFksVUFBQUEsS0FBSyxFQUFFO0FBREUsU0FEQztBQUlaUixRQUFBQSxXQUFXLEVBQUU7QUFDWFMsVUFBQUEsT0FBTyxFQUFFO0FBQ1BOLFlBQUFBLGVBQWUsRUFBRTtBQURWO0FBREU7QUFKRCxPQUFkO0FBV0EsVUFBTXRCLE1BQU0sR0FBRyxvQ0FBbUJ5QixLQUFuQixFQUEwQkMsS0FBMUIsQ0FBZjtBQUNBekIsTUFBQUEsTUFBTSxDQUFDRCxNQUFELENBQU4sQ0FBZUUsT0FBZixDQUF1QjtBQUNyQmEsUUFBQUEsU0FBUyxFQUFFO0FBQ1RZLFVBQUFBLEtBQUssRUFBRTtBQURFLFNBRFU7QUFJckJSLFFBQUFBLFdBQVcsRUFBRTtBQUNYUyxVQUFBQSxPQUFPLEVBQUU7QUFDUE4sWUFBQUEsZUFBZSxFQUFFO0FBRFY7QUFERTtBQUpRLE9BQXZCO0FBVUQsS0E5QkMsQ0FBRjtBQStCRCxHQWpETyxDQUFSO0FBa0RELENBdEtPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRWYWx1ZSwgbWVyZ2VUaGVtZSwgcmVzb2x2ZVRoZW1lVG9rZW5zIH0gZnJvbSAnLi90aGVtZS10b29scydcblxuZGVzY3JpYmUoJ1RoZW1lIHRvb2xzJywgKCkgPT4ge1xuICBkZXNjcmliZSgnZ2V0VmFsdWUnLCAoKSA9PiB7XG4gICAgaXQoJ3JldHVybnMgdGhlIHZhbHVlIGJhc2VkIG9uIGEgcGF0aCBsb29rdXAnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgIGZvbzoge1xuICAgICAgICAgIGJhcjogJ2JheidcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBnZXRWYWx1ZShvYmosICdmb28uYmFyJylcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoJ2JheicpXG4gICAgfSlcblxuICAgIGl0KCdyZXR1cm5zIHRoZSB2YWx1ZSBhcy1pcyBpZiB0aGUgcGF0aCBjYW5ub3QgYmUgcmVzb2x2ZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvYmogPSB7XG4gICAgICAgIGZvbzoge1xuICAgICAgICAgIGJhcjogJ2JheidcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBnZXRWYWx1ZShvYmosICcxMnB4JylcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoJzEycHgnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ21lcmdlVGhlbWUnLCAoKSA9PiB7XG4gICAgaXQuZWFjaChbdW5kZWZpbmVkLCBudWxsLCB7fV0pKCdzaG91bGQgcmV0dXJuIHVubW9kaWZpZWQgZGVzdGluYXRpb25UaGVtZSB3aGVuIHNvdXJjZVRoZW1lIGlzICVwJywgc291cmNlVGhlbWUgPT4ge1xuICAgICAgY29uc3QgZGVzdGluYXRpb25UaGVtZSA9IHtcbiAgICAgICAgY29sb3JzOiB7XG4gICAgICAgICAgZ3JheTkwMDogJyMxMDE4NDAnLFxuICAgICAgICAgIGdyYXk4MDA6ICcjNDc0ZDY2JyxcbiAgICAgICAgICBncmF5NzAwOiAnIzY5NmY4YydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBtZXJnZVRoZW1lKGRlc3RpbmF0aW9uVGhlbWUsIHNvdXJjZVRoZW1lKVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b1N0cmljdEVxdWFsKGRlc3RpbmF0aW9uVGhlbWUpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgb3ZlcnJpZGUgZXhpc3RpbmcgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVzdGluYXRpb25UaGVtZSA9IHtcbiAgICAgICAgY29sb3JzOiB7XG4gICAgICAgICAgZ3JheTkwMDogJyMxMDE4NDAnLFxuICAgICAgICAgIGdyYXk4MDA6ICcjNDc0ZDY2JyxcbiAgICAgICAgICBncmF5NzAwOiAnIzY5NmY4YydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzb3VyY2VUaGVtZSA9IHtcbiAgICAgICAgY29sb3JzOiB7XG4gICAgICAgICAgZ3JheTcwMDogJ3VwZGF0ZWQnXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gbWVyZ2VUaGVtZShkZXN0aW5hdGlvblRoZW1lLCBzb3VyY2VUaGVtZSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jb2xvcnMuZ3JheTcwMCkudG9CZShzb3VyY2VUaGVtZS5jb2xvcnMuZ3JheTcwMClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBhZGQgbmV3IHZhbHVlcyB3aXRob3V0IGNsb2JiZXJpbmcgZXhpc3Rpbmcgc3RydWN0dXJlJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVzdGluYXRpb25UaGVtZSA9IHtcbiAgICAgICAgY29tcG9uZW50czoge1xuICAgICAgICAgIEJ1dHRvbjoge1xuICAgICAgICAgICAgYmFzZVN0eWxlOiB7XG4gICAgICAgICAgICAgIF9kaXNhYmxlZDoge1xuICAgICAgICAgICAgICAgIGN1cnNvcjogJ25vdC1hbGxvd2VkJyxcbiAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnYXV0bydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzb3VyY2VUaGVtZSA9IHtcbiAgICAgICAgY29tcG9uZW50czoge1xuICAgICAgICAgIEJ1dHRvbjoge1xuICAgICAgICAgICAgYXBwZWFyYW5jZXM6IHtcbiAgICAgICAgICAgICAgdGFiOiB7XG4gICAgICAgICAgICAgICAgX2hvdmVyOiB7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjNjk2ZjhjJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gbWVyZ2VUaGVtZShkZXN0aW5hdGlvblRoZW1lLCBzb3VyY2VUaGVtZSlcblxuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wb25lbnRzLkJ1dHRvbi5iYXNlU3R5bGUpLnRvTWF0Y2hPYmplY3QoZGVzdGluYXRpb25UaGVtZS5jb21wb25lbnRzLkJ1dHRvbi5iYXNlU3R5bGUpXG4gICAgICBleHBlY3QocmVzdWx0LmNvbXBvbmVudHMuQnV0dG9uLmFwcGVhcmFuY2VzKS50b01hdGNoT2JqZWN0KHNvdXJjZVRoZW1lLmNvbXBvbmVudHMuQnV0dG9uLmFwcGVhcmFuY2VzKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGFsd2F5cyByZXR1cm4gYSBuZXcgcmVmZXJlbmNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVzdGluYXRpb25UaGVtZSA9IHtcbiAgICAgICAgY29sb3JzOiB7XG4gICAgICAgICAgZ3JheTkwMDogJyMxMDE4NDAnLFxuICAgICAgICAgIGdyYXk4MDA6ICcjNDc0ZDY2JyxcbiAgICAgICAgICBncmF5NzAwOiAnIzY5NmY4YydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzb3VyY2VUaGVtZSA9IHtcbiAgICAgICAgY29sb3JzOiB7XG4gICAgICAgICAgZ3JheTcwMDogJ3VwZGF0ZWQnXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gbWVyZ2VUaGVtZShkZXN0aW5hdGlvblRoZW1lLCBzb3VyY2VUaGVtZSlcblxuICAgICAgZXhwZWN0KHJlc3VsdCkubm90LnRvRXF1YWwoZGVzdGluYXRpb25UaGVtZSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdyZXNvbHZlVGhlbWVUb2tlbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3ByZXNlcnZlcyBuZXN0ZWQgb2JqZWN0IHN0cnVjdHVyZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0aGVtZSA9IHt9XG4gICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgYmFzZVN0eWxlOiB7XG4gICAgICAgICAgY29sb3I6ICdibHVlJ1xuICAgICAgICB9LFxuICAgICAgICBhcHBlYXJhbmNlczoge1xuICAgICAgICAgIHByaW1hcnk6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3BpbmsnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc29sdmVUaGVtZVRva2Vucyh0aGVtZSwgcHJvcHMpXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHByb3BzKVxuICAgIH0pXG5cbiAgICBpdCgncmVzb2x2ZXMga2V5cyBpZiB0aGV5IGV4aXN0IGluIHRoZSB0aGVtZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHRoZW1lID0ge1xuICAgICAgICBjb2xvcnM6IHtcbiAgICAgICAgICBtdXRlZDogJ2dyYXknLFxuICAgICAgICAgIHByaW1hcnk6ICdwaW5rJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICBiYXNlU3R5bGU6IHtcbiAgICAgICAgICBjb2xvcjogJ2NvbG9ycy5tdXRlZCdcbiAgICAgICAgfSxcbiAgICAgICAgYXBwZWFyYW5jZXM6IHtcbiAgICAgICAgICBwcmltYXJ5OiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdjb2xvcnMucHJpbWFyeSdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gcmVzb2x2ZVRoZW1lVG9rZW5zKHRoZW1lLCBwcm9wcylcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBiYXNlU3R5bGU6IHtcbiAgICAgICAgICBjb2xvcjogJ2dyYXknXG4gICAgICAgIH0sXG4gICAgICAgIGFwcGVhcmFuY2VzOiB7XG4gICAgICAgICAgcHJpbWFyeToge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncGluaydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcbn0pXG4iXX0=